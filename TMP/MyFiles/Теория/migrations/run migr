docker exec -it microserv-app /bin/bash
export GOOSE_DRIVER=postgres
export GOOSE_DBSTRING="user=postgres password=qwert dbname=microserv host=postgres port=5432 sslmode=disable"
export GOOSE_DBSTRING="user=postgres password=qwert dbname=microserv host=localhost port=5432 sslmode=disable"

goose -dir /app/internal/db/migrations up

echo $GOOSE_DRIVER
echo $GOOSE_DBSTRING


-- +goose Up
-- +goose StatementBegin
CREATE TABLE msg (
    id SERIAL PRIMARY KEY,
    text TEXT NOT NULL UNIQUE,
    status_1 VARCHAR(50) NOT NULL,
    status_2 VARCHAR(50),  
    created_at_1 TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP,
    created_at_2 TIMESTAMPTZ DEFAULT NULL
);

-- +goose StatementEnd

-- +goose Down
-- +goose StatementBegin
DROP TABLE msg;
-- +goose StatementEnd


-- +goose Up
-- +goose StatementBegin
CREATE UNIQUE INDEX idx_msg_text ON msg (text);
-- +goose StatementEnd

-- +goose Down
-- +goose StatementBegin
DROP INDEX idx_msg_text;
-- +goose StatementEnd


